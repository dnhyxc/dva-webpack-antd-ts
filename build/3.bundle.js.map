{"version":3,"sources":["webpack:///./src/components/NavBar/index.less","webpack:///./src/components/NavBar/index.tsx","webpack:///./src/routes/home/index.less","webpack:///./src/routes/home/index.tsx"],"names":["onLeftClick","content","rightContent","className","mode","leftContent","key","type","state","loading","models","home","userInfo","selectedProject","project","history","form","dispatch","getFieldProps","effects","getUserInfo","wrapper","size","text","animating","container","title","console","log","onClick","push","info","avatarUrl","src","alt","userName","date","action","btn","list","map","i","inputList","id","item","desc","rules","required","message","placeholder","footer","submit","validateFields","force","error","select","getFieldsValue","setTimeout"],"mappings":"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","file":"3.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"navbar\":\"index__navbar--3nKAx\"};","import React from 'react';\nimport { Icon, NavBar } from 'antd-mobile';\nimport styles from './index.less';\n\ninterface IProps {\n  onLeftClick?: () => void;\n  content: string;\n  rightContent?: any;\n}\n\nconst MNavBar: React.FC<IProps> = ({\n  onLeftClick, content, rightContent,\n}) => {\n  return (\n    <div className={styles.navbar}>\n      <NavBar\n        mode=\"light\"\n        leftContent={[\n          <Icon key={1} type=\"left\" />,\n          <span key={2}>返回</span>,\n        ]}\n        onLeftClick={onLeftClick && onLeftClick}\n        rightContent={rightContent && rightContent}\n      >\n        {content}\n      </NavBar>\n    </div>\n  );\n};\n\nexport default MNavBar;\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"index__wrapper--1GYs6\",\"loading\":\"index__loading--30n5Q\",\"container\":\"index__container--2T3Ag\",\"title\":\"index__title--Z25Fo\",\"header\":\"index__header--3hU8A\",\"info\":\"index__info--2Mpxu\",\"userInfo\":\"index__userInfo--28bJC\",\"avatarUrl\":\"index__avatarUrl--3bmW5\",\"date\":\"index__date--1EI4a\",\"action\":\"index__action--2auMj\",\"btn\":\"index__btn--19lLx\",\"content\":\"index__content--2aRTq\",\"list\":\"index__list--2438s\",\"item\":\"index__item--emsWO\",\"footer\":\"index__footer--2LSg6\",\"submit\":\"index__submit--33cB5\"};","import React, { useEffect } from 'react';\nimport {\n  Button, List, InputItem, Toast, ActivityIndicator,\n} from 'antd-mobile';\nimport { connect } from 'dva';\nimport { DispatchProp } from 'react-redux';\nimport { createForm } from 'rc-form';\nimport { homeActions } from '@/models/home';\nimport { GlobalState } from '@/models/types';\nimport { UserInfoResponse } from '@/services/home';\nimport MNavBar from '@/components/NavBar';\nimport styles from './index.less';\n\ninterface IProps extends DispatchProp {\n  history: any;\n  form: any;\n  userInfo: UserInfoResponse;\n  loading: boolean;\n  selectedProject: any;\n}\n\nconst Home: React.FC<IProps> = ({\n  history, form, dispatch, loading, userInfo, selectedProject,\n}) => {\n  const { getFieldProps } = form;\n\n  useEffect(() => {\n    dispatch(homeActions.effects.getUserInfo());\n  }, [dispatch]);\n\n  const toTeam = () => {\n    history.push('/app/team');\n  };\n\n  const toProject = () => {\n    history.push('/app/project');\n  };\n\n  const onRecordClick = () => {\n    history.push('/app/records/lisi');\n  };\n\n  const onSubmit = () => {\n    form.validateFields({ force: true }, (error: any) => {\n      if (!error) {\n        const select: any[] = [];\n        // eslint-disable-next-line guard-for-in\n        for (const key in form.getFieldsValue()) {\n          select.push({ [key]: form.getFieldsValue()[key] });\n        }\n        console.log(select, '-------------------------------');\n        // 发送请求，拿到结果之后跳转\n        setTimeout(() => {\n          history.push('/app/result');\n        }, 2000);\n      } else {\n        Toast.info('还有项目未填写');\n      }\n    });\n  };\n\n  return (\n    <div className={styles.wrapper}>\n      {\n        loading ? (\n          <ActivityIndicator\n            size=\"large\"\n            className={styles.loading}\n            text=\"Loading...\"\n            animating={loading}\n          />\n        ) :\n          (\n            <div className={styles.container}>\n              <div className={styles.title}>\n                <MNavBar\n                  content=\"项目工时统计\"\n                  onLeftClick={() => console.log('homeonLeftClick')}\n                  rightContent={[<span key={1} onClick={onRecordClick}>提交记录</span>]}\n                />\n                <div className={styles.info}>\n                  <div className={styles.userInfo}>\n                    <div>\n                      {userInfo && <img className={styles.avatarUrl} src={userInfo.avatarUrl} alt=\"\" />}\n                    </div>\n                    <div>\n                      <span>{userInfo && userInfo.userName}</span>\n                      <span className={styles.date}>2021年01月</span>\n                    </div>\n                  </div>\n                  <div className={styles.action}>\n                    <Button className={styles.btn} onClick={toTeam}>团队</Button>\n                    <Button className={styles.btn} onClick={toProject}>选择项目</Button>\n                  </div>\n                </div>\n              </div>\n              <div className={styles.content}>\n                <div className={styles.list}>\n                  {selectedProject.map((i: any) => {\n                    return (\n                      <div className={styles.inputList} key={i.id}>\n                        <form>\n                          <List>\n                            <InputItem\n                              className={styles.item}\n                              // autoAdjustHeight\n                              // eslint-disable-next-line react/jsx-props-no-spreading\n                              {...getFieldProps(`${i.desc}`, {\n                                // initialValue: 'little ant',\n                                rules: [\n                                  { required: true, message: '还有项目未填写' },\n                                ],\n                              })}\n                              type=\"money\"\n                              placeholder=\"天\"\n                            >\n                              {i.desc}\n                            </InputItem>\n                          </List>\n                        </form>\n                      </div>\n                    );\n                  })}\n                </div>\n                <div className={styles.footer}>\n                  <Button type=\"primary\" className={styles.submit} onClick={onSubmit}>提交</Button>\n                  <span>请按照实际工作天数填写（计算请假、调休和节假日加班）</span>\n                </div>\n              </div>\n            </div>\n          )\n      }\n    </div>\n  );\n};\n\nexport default connect((state: GlobalState) => ({\n  loading: state.loading.models.home,\n  userInfo: state.home.userInfo,\n  selectedProject: state.project.selectedProject,\n}))(createForm()(Home));\n"],"sourceRoot":""}